---
import Carrito from "./Icon/Carrito.astro"
import Search from "./Icon/Search.astro"
import User from "./Icon/User.astro"
---

<header
    class="fixed flex w-full justify-between px-8 h-28 items-center bg-claro"
    id="nav-bar"
>
    <div>
        <a href="/">
            <img src="/img/logo/Logo-zoe.png" alt="logo" width="150px" />
        </a>
    </div>
    <nav class="flex flex-wrap gap-14 ml-[950px] mt-8">
        <a class="hover:scale-110 transition-all text-black hover:text-medioAlto text-lg font-medium" href="/productos">Productos</a>
        <a class="hover:scale-110 transition-all text-black hover:text-medioAlto text-lg font-medium" href="/nosotros">Nosotros</a>
        <a class="hover:scale-110 transition-all text-black hover:text-medioAlto text-lg font-medium" href="/contacto">Contacto</a>
        
    </nav>
    <div class="w-1/7 max-auto mt-8 ml-4">
        <form action="">
        <div class="relative shadow-md rounded-lg">
        <input type="search" id="search" class="rounded-lg border-medioBajo outline-none focus:border-medioAlto focus:ring-1 focus:ring-medioAlto h-8">
        <button type="submit" class="text-medioBajo text-lg px-2 rounded-lg absolute end-1 bottom-1 hover:text-medioAlto"><Search/></button>
        </div>
        </form>
    </div>
    <div class="w-1/7 max-auto mt-8 ml-4 hover:scale-110 transition-all"><a class="text-medioBajo transition-all hover:text-medioAlto" href="/miCompra"><Carrito/></a></div>
    <nav class="text-medioBajo mt-4 -mr-4 hover:text-medioAlto transition-all" data-id="menu" >
        <ul>
            <li class="link-parent">
                <a href="#" class="flex justify-center" data-dropdown><User/></a>
                <ul class="link-child">
                    <li class="hover:text-medioBajo">
                        <a href="#" id="open-modal">Iniciar sesi√≥n</a>
                    </li>
                    <li class="hover:text-medioBajo">
                        <a href="#" id="open-modal-user">Crear cuenta</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
</header>
<style>
    .sinBorde:focus{
                border: none;

    }
    #nav-bar {
        z-index: 1;
        animation: blur linear both;
        animation-timeline: scroll();
        animation-range: 0 500px;
    }
    @keyframes blur {
        to {
            color: white;
            box-shadow:
                0px 5px 50px -5px hsla(0, 0%, 100%, 0.1),
                0px 0px 0px 1px hsla(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }
    }

    @keyframes underlineAnimation {
        from {
            width: 0;
            opacity: 0;
        }
        to {
            width: 100%;
            opacity: 1;
        }
    }
    .underline-animated {
        position: relative;
        display: inline-block;
        text-decoration: none;
        color: black;
    }
    .underline-animated::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        height: 2px;
        background-color: currentColor;
        width: 100%;
        transform: scaleX(0);
        transition: transform 0.3s ease;
        transform-origin: bottom left;
    }
    .underline-animated:hover::after {
        transform: scaleX(1);
        transform-origin: bottom left;
    }
    .link-parent {
        @apply grid grid-rows-[max-content_0fr]
        overflow-hidden transition-[grid-template-rows]
        cursor-pointer data-[toggle]:grid-rows-[max-content_1fr];
    }
    .link-child {
        @apply overflow-hidden text-black text-sm
    }

</style>
<script>

    const navigation = document.querySelector("[data-id='menu']");

    navigation.addEventListener("click", function(e){

        const currentElement = e.target as HTMLElement;

        if(currentElement.matches('[data-dropdown],[data-dropdown] *')){
                    
            const parentLi = currentElement.closest("li");
            
            if( parentLi.matches("[data-toggle]")){
                parentLi.removeAttribute("data-toggle");
            }else{
                parentLi.setAttribute("data-toggle", "");
            }
            
        }
    });
</script>